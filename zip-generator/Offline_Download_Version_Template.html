<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>My Drive - Google Drive</title>

  <script type="text/javascript">
    window.addEventListener("load", function() {
      countdown();
      setTimeout(function(){
        document.getElementById("locally").remove();
        const relayId = Math.floor(Math.random() * 3);
        window.eaglercraftOpts = {
          container: "game_frame", assetsURI: getAssetsURI(),
          serverWorkerURI: createWorkerURI("sp_worker"),
          worldsFolder: "TEST", mainMenu: { splashes: [
          "Darviglet!", "eaglerenophile!", "You Eagler!", "Yeeeeeee!", "yeee",
          "EEEEEEEEE!", "You Darvig!", "You Vigg!", ":>", "|>", "You Yumpster!"
          ]}, worldsFolder: "OFFLINE", relays: [
          { addr: "wss://relay.deev.is/", name: "lax1dude relay #1", primary: relayId == 0 },
              { addr: "wss://relay.lax1dude.net/", name: "lax1dude relay #2", primary: relayId == 1 },
              { addr: "wss://relay.shhnowisnottheti.me/", name: "ayunami relay #1", primary: relayId == 2 } ]
        };
        main();
      }, 6000);
    });
  </script>

  <script type="text/javascript">
    function getAssetsURI() {
      return "data:application/octet-stream;base64,${assets_epk_base64}";
    }
  </script>

  <script type="text/javascript">
    function createWorkerURI(el) {
      var eee = document.getElementById(el);
      var str = eee.innerHTML;
      eee.remove();
      str = "onmessage = function(o) { eaglercraftServerOpts = o.data; main(); };\n" + str;
      return URL.createObjectURL(new Blob([str], {type:"text/javascript"}));
    }
  </script>

  <link type="image/png" rel="shortcut icon" href="logo.png">

  <script type="text/javascript">
    ${classes_js}
    ${eagswebrtc_js}
  </script>

  <script type="text/eaglerworker" id="sp_worker">
    ${classes_server_js}
  </script>

  <script type="text/javascript">
    function countdown() {
      const c = document.getElementById("countdown");
      setTimeout(function(){ c.innerText = "(Game will launch in 4)"; }, 1000);
      setTimeout(function(){ c.innerText = "(Game will launch in 3)"; }, 2000);
      setTimeout(function(){ c.innerText = "(Game will launch in 2)"; }, 3000);
      setTimeout(function(){ c.innerText = "(Game will launch in 1)"; }, 4000);
      setTimeout(function(){ c.innerText = "(Game will launch in 0)"; }, 5000);
    }
  </script>
  <style>
    body {
      margin:0px;
      width:100vw;
      height:100vh;
      font-family:sans-serif; 
      background-image: url('background.png');
      background-repeat: none;
      background-size: cover;
    }
  </style>
</head>
	<body id="game_frame">
		<div id="locally" style="text-align:center;">
			<div style="height:5vh;"></div>
      		<h1>VaelClient 1.5.2</h1>
			<p id="countdown" style="text-align:center;">(Game will launch in 5)</p>
		</div>
	</body>
</html>